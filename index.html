<!doctype html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¯ÛŒØ±ÛŒØª ØªØºØ°ÛŒÙ‡ Ø¨ÛŒÙ…Ø§Ø±Ø§Ù† Ø¯ÛŒØ§Ù„ÛŒØ²ÛŒ</title>
    <link rel="manifest" href="/manifest.json">
    <style>
        /* Ø¨Ø®Ø´ Ø§Ø³ØªØ§ÛŒÙ„ Ø¯Ø± Ø¨Ø®Ø´ Ø¨Ø¹Ø¯ÛŒ Ú©Ù¾ÛŒ Ø´ÙˆØ¯ */
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>Ù…Ø¯ÛŒØ±ÛŒØª ØªØºØ°ÛŒÙ‡ Ø¨ÛŒÙ…Ø§Ø±Ø§Ù† Ø¯ÛŒØ§Ù„ÛŒØ²ÛŒ</h1>
        </div>

        <div class="nav">
            <button onclick="showSection('dashboard')" class="active">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</button>
            <button onclick="showSection('education')">Ø¢Ù…ÙˆØ²Ø´</button>
            <button onclick="showSection('foodList')">Ù„ÛŒØ³Øª Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ</button>
            <button onclick="showSection('addFood')">Ø§ÙØ²ÙˆØ¯Ù† ØºØ°Ø§</button>
            <button onclick="showSection('history')">ØªØ§Ø±ÛŒØ®Ú†Ù‡</button>
            <button onclick="showSection('settings')">ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
        </div>

        <!-- Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ -->
        <div id="dashboard" class="section active">
            <div class="chart-container-grid">
                <div class="chart-container">
                    <canvas id="sodiumChart"></canvas>
                    <div class="chart-info">
                        <div class="chart-face-sticker" id="sodiumFaceSticker"></div>
                        <div class="chart-label">Ø³Ø¯ÛŒÙ…</div>
                        <div class="chart-percentage" id="sodiumPercentage"></div>
                        <div class="chart-value" id="sodiumValue"></div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="potassiumChart"></canvas>
                    <div class="chart-info">
                        <div class="chart-face-sticker" id="potassiumFaceSticker"></div>
                        <div class="chart-label">Ù¾ØªØ§Ø³ÛŒÙ…</div>
                        <div class="chart-percentage" id="potassiumPercentage"></div>
                        <div class="chart-value" id="potassiumValue"></div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="phosphorusChart"></canvas>
                    <div class="chart-info">
                        <div class="chart-face-sticker" id="phosphorusFaceSticker"></div>
                        <div class="chart-label">ÙØ³ÙØ±</div>
                        <div class="chart-percentage" id="phosphorusPercentage"></div>
                        <div class="chart-value" id="phosphorusValue"></div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="waterChart"></canvas>
                    <div class="chart-info">
                        <div class="chart-face-sticker" id="waterFaceSticker"></div>
                        <div class="chart-label">Ø¢Ø¨</div>
                        <div class="chart-percentage" id="waterPercentage"></div>
                        <div class="chart-value" id="waterValue"></div>
                    </div>
                </div>
            </div>
            <div class="current-totals" id="currentTotals"></div>
            <div id="warnings"></div>
            <h2>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÙˆØ§Ø¯ Ù…ØºØ°ÛŒ</h2>
            <form class="food-form" onsubmit="addFoodEntry(event)">
                <select id="foodSelect" required></select>
                <input type="number" id="amount" placeholder="Ù…Ù‚Ø¯Ø§Ø± (ÙˆØ§Ø­Ø¯)" step="1" required>
                <select id="mealType" required>
                    <option value="breakfast">ØµØ¨Ø­Ø§Ù†Ù‡</option>
                    <option value="lunch">Ù†Ø§Ù‡Ø§Ø±</option>
                    <option value="dinner">Ø´Ø§Ù…</option>
                </select>
                <select id="dayOfWeek" required>
                    <option value="saturday">Ø´Ù†Ø¨Ù‡</option>
                    <option value="sunday">ÛŒÚ©Ø´Ù†Ø¨Ù‡</option>
                    <option value="monday">Ø¯ÙˆØ´Ù†Ø¨Ù‡</option>
                    <option value="tuesday">Ø³Ù‡ Ø´Ù†Ø¨Ù‡</option>
                    <option value="wednesday">Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡</option>
                    <option value="thursday">Ù¾Ù†Ø¬ Ø´Ù†Ø¨Ù‡</option>
                    <option value="friday">Ø¬Ù…Ø¹Ù‡</option>
                </select>
                <button type="submit">Ø«Ø¨Øª Ù…ØµØ±Ù</button>
            </form>
        </div>

        <!-- Ø¨Ø®Ø´ Ø¢Ù…ÙˆØ²Ø´ÛŒ -->
        <div id="education" class="section">
            <h2>ÙˆÛŒØ¯ÛŒÙˆÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ</h2>
            <div class="video-container" id="videoContainer">
                <!-- Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ù„ÛŒÙ†Ú© Ø¢Ù¾Ø§Ø±Ø§Øª Ø¯Ø± Ø¢ÛŒÙ†Ø¯Ù‡ -->
            </div>

            <h2>Ù…Ù‚Ø§Ù„Ø§Øª Ø¢Ù…ÙˆØ²Ø´ÛŒ</h2>
            <div class="education-list">
                <div class="education-item">Û±. Ø§Ù‡Ù…ÛŒØª Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù…Ø§ÛŒØ¹Ø§Øª Ø¯Ø± Ø¯ÛŒØ§Ù„ÛŒØ²</div>
                <div class="education-item">Û². Ù…Ø¯ÛŒØ±ÛŒØª Ù…ØµØ±Ù Ù¾ØªØ§Ø³ÛŒÙ… Ø±ÙˆØ²Ø§Ù†Ù‡</div>
                <div class="education-item">Û³. Ù…Ù†Ø§Ø¨Ø¹ ØºØ°Ø§ÛŒÛŒ Ø­Ø§ÙˆÛŒ ÙØ³ÙØ± Ø¨Ø§Ù„Ø§</div>
                <div class="education-item">Û´. Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±ÛŒØ²ÛŒ ÙˆØ¹Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØºØ°Ø§ÛŒÛŒ Ù‡ÙØªÚ¯ÛŒ</div>
                <div class="education-item">Ûµ. Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ù†Ù…Ú© Ø¯Ø± Ø±Ú˜ÛŒÙ… ØºØ°Ø§ÛŒÛŒ</div>
                <div class="education-item">Û¶. Ú©Ù†ØªØ±Ù„ ÙØ´Ø§Ø± Ø®ÙˆÙ† Ø¯Ø± Ø¨ÛŒÙ…Ø§Ø±Ø§Ù† Ø¯ÛŒØ§Ù„ÛŒØ²ÛŒ</div>
                <div class="education-item">Û·. Ù†Ù‚Ø´ Ù¾Ø±ÙˆØªØ¦ÛŒÙ† Ø¯Ø± ØªØºØ°ÛŒÙ‡ Ø¯ÛŒØ§Ù„ÛŒØ²ÛŒ</div>
                <div class="education-item">Û¸. Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ²Ù† Ø¯Ø± Ø¨ÛŒÙ† Ø¬Ù„Ø³Ø§Øª Ø¯ÛŒØ§Ù„ÛŒØ²</div>
                <div class="education-item">Û¹. Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ Ù…Ù…Ù†ÙˆØ¹Ù‡ Ø¨Ø±Ø§ÛŒ Ø¨ÛŒÙ…Ø§Ø±Ø§Ù† Ú©Ù„ÛŒÙˆÛŒ</div>
                <div class="education-item">Û±Û°. Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§ÛŒ Ú©Ø§Ù‡Ø´ ØªØ´Ù†Ú¯ÛŒ</div>
                <div class="education-item">Û±Û±. Ù…ØµØ±Ù ØµØ­ÛŒØ­ Ù…Ú©Ù…Ù„â€ŒÙ‡Ø§ÛŒ ØºØ°Ø§ÛŒÛŒ</div>
                <div class="education-item">Û±Û². ÙˆØ±Ø²Ø´ Ùˆ ÙØ¹Ø§Ù„ÛŒØª Ø¨Ø¯Ù†ÛŒ Ù…Ù†Ø§Ø³Ø¨</div>
                <div class="education-item">Û±Û³. Ú©Ù†ØªØ±Ù„ Ù‚Ù†Ø¯ Ø®ÙˆÙ† Ø¯Ø± Ø¨ÛŒÙ…Ø§Ø±Ø§Ù† Ø¯ÛŒØ§Ø¨ØªÛŒ</div>
                <div class="education-item">Û±Û´. Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ù¾Ø®Øª Ù…Ù†Ø§Ø³Ø¨</div>
                <div class="education-item">Û±Ûµ. Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø³ØªØ±Ø³ Ùˆ Ø³Ù„Ø§Ù…Øª Ø±ÙˆØ§Ù†</div>
                <div class="education-item">Û±Û¶. Ù†Ø´Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÙˆØ±Ú˜Ø§Ù†Ø³ÛŒ Ø¯Ø± Ø¨ÛŒÙ…Ø§Ø±Ø§Ù†</div>
                <div class="education-item">Û±Û·. Ù…Ø±Ø§Ù‚Ø¨Øª Ø§Ø² Ø¯Ø³ØªØ±Ø³ÛŒ Ø¹Ø±ÙˆÙ‚ÛŒ</div>
                <div class="education-item">Û±Û¸. ØªØ¯Ø§Ø®Ù„Ø§Øª Ø¯Ø§Ø±ÙˆÛŒÛŒ Ø¨Ø§ Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ</div>
                <div class="education-item">Û±Û¹. Ø¨Ø±Ù†Ø§Ù…Ù‡ ØºØ°Ø§ÛŒÛŒ Ù†Ù…ÙˆÙ†Ù‡ Ø±ÙˆØ²Ø§Ù†Ù‡</div>
                <div class="education-item">Û²Û°. Ù†Ú©Ø§Øª Ù…Ù‡Ù… Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ø±Ø§Ù‡Ø§Ù† Ø¨ÛŒÙ…Ø§Ø±</div>
            </div>
        </div>

        <!-- Ø¨Ø®Ø´ Ù„ÛŒØ³Øª Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ -->
        <div id="foodList" class="section">
            <h2>Ù„ÛŒØ³Øª Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ</h2>
            <table class="food-table">
                <thead>
                    <tr>
                        <th>Ù†Ø§Ù…</th>
                        <th>Ø³Ø¯ÛŒÙ… (mg)</th>
                        <th>Ù¾ØªØ§Ø³ÛŒÙ… (mg)</th>
                        <th>ÙØ³ÙØ± (mg)</th>
                        <th>Ø¢Ø¨ (ml)</th>
                        <th>Ø§Ù‚Ø¯Ø§Ù…Ø§Øª</th>
                    </tr>
                </thead>
                <tbody id="foodDatabase"></tbody>
            </table>
            <form class="edit-food-form" id="editFoodForm" onsubmit="editFood(event)">
                <input type="hidden" id="editFoodIndex">
                <input type="text" id="editFoodName" placeholder="Ù†Ø§Ù… Ù…Ø§Ø¯Ù‡ ØºØ°Ø§ÛŒÛŒ" required>
                <input type="number" id="editSodium" placeholder="Ø³Ø¯ÛŒÙ… (Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…)" required>
                <input type="number" id="editPotassium" placeholder="Ù¾ØªØ§Ø³ÛŒÙ… (Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…)" required>
                <input type="number" id="editPhosphorus" placeholder="ÙØ³ÙØ± (Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…)" required>
                <input type="number" id="editWater" placeholder="Ø¢Ø¨ (Ù…ÛŒÙ„ÛŒ Ù„ÛŒØªØ±)" required>
                <button type="submit">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
                <button type="button" onclick="cancelEdit()">Ø§Ù†ØµØ±Ø§Ù</button>
            </form>
        </div>

        <!-- Ø¨Ø®Ø´ Ø§ÙØ²ÙˆØ¯Ù† ØºØ°Ø§ -->
        <div id="addFood" class="section">
            <h2>Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…Ø§Ø¯Ù‡ ØºØ°Ø§ÛŒÛŒ Ø¬Ø¯ÛŒØ¯</h2>
            <form class="new-food-form" onsubmit="addNewFood(event)">
                <input type="text" id="newFoodName" placeholder="Ù†Ø§Ù… Ù…Ø§Ø¯Ù‡ ØºØ°Ø§ÛŒÛŒ" required>
                <input type="number" id="sodium" placeholder="Ø³Ø¯ÛŒÙ… (Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…)" required>
                <input type="number" id="potassium" placeholder="Ù¾ØªØ§Ø³ÛŒÙ… (Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…)" required>
                <input type="number" id="phosphorus" placeholder="ÙØ³ÙØ± (Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…)" required>
                <input type="number" id="water" placeholder="Ø¢Ø¨ (Ù…ÛŒÙ„ÛŒ Ù„ÛŒØªØ±)" required>
                <button type="submit">Ø°Ø®ÛŒØ±Ù‡</button>
            </form>
        </div>

        <!-- Ø¨Ø®Ø´ ØªØ§Ø±ÛŒØ®Ú†Ù‡ -->
        <div id="history" class="section">
            <h2>ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…ØµØ±Ù</h2>
            <button class="reset-button" onclick="clearHistory()">Ø­Ø°Ù ØªØ§Ø±ÛŒØ®Ú†Ù‡</button>
            <table class="history-table">
                <thead>
                    <tr>
                        <th>Ù†Ø§Ù… ØºØ°Ø§</th>
                        <th>Ù…Ù‚Ø¯Ø§Ø± (ÙˆØ§Ø­Ø¯)</th>
                        <th>ÙˆØ¹Ø¯Ù‡</th>
                        <th>Ø±ÙˆØ² Ù‡ÙØªÙ‡</th>
                    </tr>
                </thead>
                <tbody id="historyTable"></tbody>
            </table>
        </div>

        <!-- Ø¨Ø®Ø´ ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
        <div id="settings" class="section">
            <h2>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§</h2>
            <form class="settings-form" onsubmit="saveSettings(event)">
                <label for="sodiumLimit">Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø³Ø¯ÛŒÙ… (Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…):</label>
                <input type="number" id="sodiumLimit" required>
                <label for="potassiumLimit">Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù¾ØªØ§Ø³ÛŒÙ… (Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…):</label>
                <input type="number" id="potassiumLimit" required>
                <label for="phosphorusLimit">Ù…Ø­Ø¯ÙˆØ¯ÛŒØª ÙØ³ÙØ± (Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…):</label>
                <input type="number" id="phosphorusLimit" required>
                <label for="waterLimit">Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¢Ø¨ (Ù…ÛŒÙ„ÛŒ Ù„ÛŒØªØ±):</label>
                <input type="number" id="waterLimit" required>
                <button type="submit">Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§</button>
            </form>
            <button class="reset-button" onclick="resetData()">Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</button>
            <div class="theme-settings">
                <h2>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÙˆØ³ØªÙ‡</h2>
                <label for="fontSize">Ø§Ù†Ø¯Ø§Ø²Ù‡ ÙÙˆÙ†Øª:</label>
                <input type="number" id="fontSize" value="1" step="0.1">
                <button onclick="applyTheme()">Ø§Ø¹Ù…Ø§Ù„ Ù¾ÙˆØ³ØªÙ‡</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Ø¨Ø®Ø´ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¯Ø± Ù‚Ø³Ù…Øª Ø¨Ø¹Ø¯ÛŒ Ú©Ù¾ÛŒ Ø´ÙˆØ¯
    </script>
</body>
</html>
<style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100;200;300;400;500;600;700;800;900&display=swap');

        :root {
            --primary-color: #9c27b0;
            --secondary-color: #7b1fa2;
            --text-color: #333;
            --background-color: #f8f8f8;
            --accent-color: #e1bee7;
            --font-size: 1rem;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            direction: rtl;
            background-color: var(--background-color);
            color: var(--text-color);
            font-size: var(--font-size);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            margin: 20px auto;
            padding: 1rem;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            flex: 1;
        }

        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem;
            border-radius: 10px 10px 0 0;
            text-align: center;
            margin-bottom: 10px;
        }

        .nav {
            display: flex;
            justify-content: space-around;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .nav button {
            border: none;
            border-radius: 5px;
            background-color: var(--secondary-color);
            color: white;
            cursor: pointer;
            padding: 0.5rem 1rem;
            font-size: 1rem;
            flex: 1;
            margin: 0.2rem;
            transition: all 0.3s ease;
        }

        .nav button:hover {
            background-color: var(--primary-color);
        }

        .nav button.active {
            background-color: var(--primary-color);
        }

        .section {
            display: none;
            background-color: white;
            padding: 1rem;
            border-radius: 0 0 10px 10px;
        }

        .section.active {
            display: block;
        }

        .food-form,
        .new-food-form,
        .settings-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        input,
        select,
        button {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            box-sizing: border-box;
        }

        .warning {
            color: white;
            font-weight: bold;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            background-color: #f44336;
            text-align: center;
        }

        .chart-container {
            margin-top: 10px;
            height: 150px;
            border-radius: 10px;
            border: 1px solid #ddd;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            position: relative;
            flex-direction: row;
            width: 48%;
        }

        .chart-container canvas {
            max-width: 60%;
            max-height: 100%;
        }

        .limit-line {
            position: absolute;
            left: 0;
            right: 0;
            border-bottom: 2px dashed;
        }

        .limit-line.safe {
            border-color: green;
        }

        .limit-line.danger {
            border-color: red;
        }

        .chart-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            margin-right: 10px;
            flex: 1;
        }

        .chart-face-sticker {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 5px;
        }

        .chart-label {
            font-size: 0.8rem;
            text-align: right;
        }

        .chart-percentage {
            font-size: 0.9rem;
            text-align: right;
            margin-bottom: 5px;
        }

        .chart-value {
            font-size: 0.9rem;
            text-align: right;
        }

        .food-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            border: 1px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
        }

        .food-table th,
        .food-table td {
            padding: 0.5rem;
            border-bottom: 1px solid #ddd;
            text-align: center;
        }

        .food-table th {
            background-color: #f0f0f0;
        }

        .current-totals {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }

        .current-totals p {
            background-color: #eee;
            padding: 0.5rem;
            border-radius: 5px;
            font-size: 0.9rem;
            text-align: center;
        }

        .settings-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .settings-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .settings-form input[type="number"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }

        .settings-form button {
            grid-column: span 2;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .settings-form button:hover {
            background-color: var(--primary-color);
        }

        .reset-button {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
            width: 100%;
        }

        .reset-button:hover {
            background-color: #d32f2f;
        }

        .theme-settings {
            margin-top: 20px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .theme-settings label {
            font-weight: bold;
        }

        .theme-settings input[type="color"],
        .theme-settings input[type="number"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }

        .theme-settings button {
            grid-column: span 1;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .theme-settings button:hover {
            background-color: var(--primary-color);
        }

        .face-sticker {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 10px;
        }

        .edit-food-form {
            display: none;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .edit-food-form.active {
            display: grid;
        }

        .edit-food-form input,
        .edit-food-form button {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            box-sizing: border-box;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            border: 1px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
        }

        .history-table th,
        .history-table td {
            padding: 0.5rem;
            border-bottom: 1px solid #ddd;
            text-align: center;
        }

        .history-table th {
            background-color: #f0f0f0;
        }

        .chart-container-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .food-table button,
        .history-table button {
            padding: 5px 10px;
            font-size: 0.9rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background-color: var(--secondary-color);
            color: white;
            transition: background-color 0.3s ease;
        }

        .food-table button:hover,
        .history-table button:hover {
            background-color: var(--primary-color);
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¨Ø®Ø´ Ø¢Ù…ÙˆØ²Ø´ÛŒ */
        .education-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .education-item {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-right: 4px solid var(--primary-color);
        }

        .video-container {
            margin: 20px 0;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            aspect-ratio: 16/9;
        }

        .video-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px auto;
                padding: 0.5rem;
            }

            .nav {
                flex-direction: column;
            }

            .nav button {
                margin: 0.2rem 0;
            }

            .food-form,
            .new-food-form,
            .settings-form,
            .edit-food-form {
                grid-template-columns: 1fr;
            }

            .current-totals {
                grid-template-columns: 1fr;
            }

            .chart-container {
                width: 100%;
            }

            .education-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <script>
        // ØªØ§Ø¨Ø¹ ØªÙˆÙ„ÛŒØ¯ Ø´Ù†Ø§Ø³Ù‡ ÛŒÚ©ØªØ§ (UUID)
        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                var r = Math.random() * 16 | 0,
                    v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        // Ø¯Ø±ÛŒØ§ÙØª Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø± (Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø´ØªØŒ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
        let userId = localStorage.getItem('userId');
        if (!userId) {
            userId = generateUUID();
            localStorage.setItem('userId', userId);
        }

        // ØªØ§Ø¨Ø¹ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± ÙØ¹Ù„ÛŒ
        function saveData(data) {
            localStorage.setItem(`userData_${userId}`, JSON.stringify(data));
        }

        // ØªØ§Ø¨Ø¹ Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± ÙØ¹Ù„ÛŒ
        function getData() {
            const data = localStorage.getItem(`userData_${userId}`);
            return data ? JSON.parse(data) : null;
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        let userData = getData();
        let foodDB = (userData && userData.foodDB) || [
            {name: 'Ù…Ø±Øº', sodium: 70, potassium: 280, phosphorus: 200, water: 65},
            {name: 'Ø¨Ø±Ù†Ø¬', sodium: 5, potassium: 35, phosphorus: 40, water: 70},
            {name: 'Ø³ÛŒØ¨ Ø²Ù…ÛŒÙ†ÛŒ', sodium: 10, potassium: 400, phosphorus: 50, water: 80},
            {name: 'Ø´ÛŒØ±', sodium: 50, potassium: 350, phosphorus: 250, water: 90},
            {name: 'Ù†Ø§Ù†', sodium: 200, potassium: 80, phosphorus: 70, water: 40},
            {name: 'ØªØ®Ù… Ù…Ø±Øº', sodium: 60, potassium: 70, phosphorus: 90, water: 75},
            {name: 'Ù…Ø§Ø³Øª', sodium: 80, potassium: 150, phosphorus: 120, water: 85},
            {name: 'Ø®ÛŒØ§Ø±', sodium: 5, potassium: 150, phosphorus: 20, water: 95},
            {name: 'Ú¯ÙˆØ¬Ù‡ ÙØ±Ù†Ú¯ÛŒ', sodium: 10, potassium: 250, phosphorus: 30, water: 90},
            {name: 'Ù‡ÙˆÛŒØ¬', sodium: 15, potassium: 300, phosphorus: 35, water: 88}
        ];
        let dailyIntake = (userData && userData.dailyIntake) || [];
        let settings = (userData && userData.settings) || {
            sodiumLimit: 2000,
            potassiumLimit: 2000,
            phosphorusLimit: 1000,
            waterLimit: 1500
        };
        let themeSettings = (userData && userData.themeSettings) || {fontSize: '1'};
        let currentEditIndex = null;

        // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§
        const sodiumChart = new Chart(document.getElementById('sodiumChart'), {
            type: 'doughnut',
            data: {labels: ['Ù…ØµØ±Ù Ø´Ø¯Ù‡', 'Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡'], datasets: [{
                data: [0, 100],
                backgroundColor: ['rgba(255, 99, 132, 0.7)', 'rgba(220,220,220,0.7)'],
                borderColor: ['rgba(255, 99, 132, 1)', 'rgba(220,220,220,1)'],
                borderWidth: 1
            }]},
            options: {responsive: true, maintainAspectRatio: false, cutout: '70%', plugins: {legend: {display: false}}}
        });

        const potassiumChart = new Chart(document.getElementById('potassiumChart'), {
            type: 'doughnut',
            data: {labels: ['Ù…ØµØ±Ù Ø´Ø¯Ù‡', 'Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡'], datasets: [{
                data: [0, 100],
                backgroundColor: ['rgba(54, 162, 235, 0.7)', 'rgba(220,220,220,0.7)'],
                borderColor: ['rgba(54, 162, 235, 1)', 'rgba(220,220,220,1)'],
                borderWidth: 1
            }]},
            options: {responsive: true, maintainAspectRatio: false, cutout: '70%', plugins: {legend: {display: false}}}
        });

        const phosphorusChart = new Chart(document.getElementById('phosphorusChart'), {
            type: 'doughnut',
            data: {labels: ['Ù…ØµØ±Ù Ø´Ø¯Ù‡', 'Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡'], datasets: [{
                data: [0, 100],
                backgroundColor: ['rgba(255, 206, 86, 0.7)', 'rgba(220,220,220,0.7)'],
                borderColor: ['rgba(255, 206, 86, 1)', 'rgba(220,220,220,1)'],
                borderWidth: 1
            }]},
            options: {responsive: true, maintainAspectRatio: false, cutout: '70%', plugins: {legend: {display: false}}}
        });

        const waterChart = new Chart(document.getElementById('waterChart'), {
            type: 'doughnut',
            data: {labels: ['Ù…ØµØ±Ù Ø´Ø¯Ù‡', 'Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡'], datasets: [{
                data: [0, 100],
                backgroundColor: ['rgba(75, 192, 192, 0.7)', 'rgba(220,220,220,0.7)'],
                borderColor: ['rgba(75, 192, 192, 1)', 'rgba(220,220,220,1)'],
                borderWidth: 1
            }]},
            options: {responsive: true, maintainAspectRatio: false, cutout: '70%', plugins: {legend: {display: false}}}
        });

        // ØªÙˆØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            document.querySelectorAll('.nav button').forEach(button => button.classList.remove('active'));
            document.querySelector(`.nav button[onclick="showSection('${sectionId}')"]`).classList.add('active');
        }

        function updateChart() {
            let currentTotals = calculateCurrentTotals();
            let sodiumPercentage = Math.min((currentTotals.sodium / settings.sodiumLimit) * 100, 100);
            let potassiumPercentage = Math.min((currentTotals.potassium / settings.potassiumLimit) * 100, 100);
            let phosphorusPercentage = Math.min((currentTotals.phosphorus / settings.phosphorusLimit) * 100, 100);
            let waterPercentage = Math.min((currentTotals.water / settings.waterLimit) * 100, 100);

            sodiumChart.data.datasets[0].data = [sodiumPercentage, 100 - sodiumPercentage];
            potassiumChart.data.datasets[0].data = [potassiumPercentage, 100 - potassiumPercentage];
            phosphorusChart.data.datasets[0].data = [phosphorusPercentage, 100 - phosphorusPercentage];
            waterChart.data.datasets[0].data = [waterPercentage, 100 - waterPercentage];

            sodiumChart.update();
            potassiumChart.update();
            phosphorusChart.update();
            waterChart.update();

            document.getElementById('sodiumPercentage').textContent = `${sodiumPercentage.toFixed(0)}%`;
            document.getElementById('potassiumPercentage').textContent = `${potassiumPercentage.toFixed(0)}%`;
            document.getElementById('phosphorusPercentage').textContent = `${phosphorusPercentage.toFixed(0)}%`;
            document.getElementById('waterPercentage').textContent = `${waterPercentage.toFixed(0)}%`;

            document.getElementById('sodiumValue').textContent = `${currentTotals.sodium} Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…`;
            document.getElementById('potassiumValue').textContent = `${currentTotals.potassium} Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…`;
            document.getElementById('phosphorusValue').textContent = `${currentTotals.phosphorus} Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…`;
            document.getElementById('waterValue').textContent = `${currentTotals.water} Ù…ÛŒÙ„ÛŒ Ù„ÛŒØªØ±`;
        }

        function calculateCurrentTotals() {
            let totals = {sodium: 0, potassium: 0, phosphorus: 0, water: 0};
            dailyIntake.forEach(item => {
                let food = foodDB.find(f => f.name === item.foodName);
                if (food) {
                    totals.sodium += food.sodium * item.amount;
                    totals.potassium += food.potassium * item.amount;
                    totals.phosphorus += food.phosphorus * item.amount;
                    totals.water += food.water * item.amount;
                }
            });
            return {
                sodium: Math.round(totals.sodium),
                potassium: Math.round(totals.potassium),
                phosphorus: Math.round(totals.phosphorus),
                water: Math.round(totals.water)
            };
        }

        function updateCurrentTotalsDisplay() {
            let currentTotals = calculateCurrentTotals();
            document.getElementById('currentTotals').innerHTML = `
                <p>Ø³Ø¯ÛŒÙ…: ${currentTotals.sodium} Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…</p>
                <p>Ù¾ØªØ§Ø³ÛŒÙ…: ${currentTotals.potassium} Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…</p>
                <p>ÙØ³ÙØ±: ${currentTotals.phosphorus} Ù…ÛŒÙ„ÛŒ Ú¯Ø±Ù…</p>
                <p>Ø¢Ø¨: ${currentTotals.water} Ù…ÛŒÙ„ÛŒ Ù„ÛŒØªØ±</p>
            `;
        }

        function addFoodEntry(event) {
            event.preventDefault();
            const foodName = document.getElementById('foodSelect').value;
            const amount = parseInt(document.getElementById('amount').value);
            const mealType = document.getElementById('mealType').value;
            const dayOfWeek = document.getElementById('dayOfWeek').value;

            const mealTypeFa = {'breakfast': 'ØµØ¨Ø­Ø§Ù†Ù‡', 'lunch': 'Ù†Ø§Ù‡Ø§Ø±', 'dinner': 'Ø´Ø§Ù…'}[mealType];
            const dayOfWeekFa = {
                'saturday': 'Ø´Ù†Ø¨Ù‡', 'sunday': 'ÛŒÚ©Ø´Ù†Ø¨Ù‡', 'monday': 'Ø¯ÙˆØ´Ù†Ø¨Ù‡',
                'tuesday': 'Ø³Ù‡ Ø´Ù†Ø¨Ù‡', 'wednesday': 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡', 'thursday': 'Ù¾Ù†Ø¬ Ø´Ù†Ø¨Ù‡', 'friday': 'Ø¬Ù…Ø¹Ù‡'
            }[dayOfWeek];

            dailyIntake.push({foodName, amount, mealType: mealTypeFa, dayOfWeek: dayOfWeekFa});
            userData = getData() || {};
            userData.dailyIntake = dailyIntake;
            saveData(userData);

            updateChart();
            updateCurrentTotalsDisplay();
            checkLimits();
            document.getElementById('amount').value = '';
            updateFaceStickers();
            updateHistoryTable();
        }

        function updateFoodSelect() {
            const foodSelect = document.getElementById('foodSelect');
            foodSelect.innerHTML = '';
            foodDB.forEach(food => {
                const option = document.createElement('option');
                option.value = food.name;
                option.textContent = food.name;
                foodSelect.appendChild(option);
            });
        }

        function addNewFood(event) {
            event.preventDefault();
            const newFood = {
                name: document.getElementById('newFoodName').value,
                sodium: parseInt(document.getElementById('sodium').value),
                potassium: parseInt(document.getElementById('potassium').value),
                phosphorus: parseInt(document.getElementById('phosphorus').value),
                water: parseInt(document.getElementById('water').value)
            };
            foodDB.push(newFood);
            userData = getData() || {};
            userData.foodDB = foodDB;
            saveData(userData);
            updateEducationDB();
            updateFoodSelect();
            document.getElementById('newFoodName').value = '';
            document.getElementById('sodium').value = '';
            document.getElementById('potassium').value = '';
            document.getElementById('phosphorus').value = '';
            document.getElementById('water').value = '';
        }

        function updateEducationDB() {
            const foodDatabase = document.getElementById('foodDatabase');
            foodDatabase.innerHTML = '';
            foodDB.forEach((food, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${food.name}</td>
                    <td>${food.sodium}</td>
                    <td>${food.potassium}</td>
                    <td>${food.phosphorus}</td>
                    <td>${food.water}</td>
                    <td>
                        <button onclick="editFoodForm(${index})">ÙˆÛŒØ±Ø§ÛŒØ´</button>
                        <button onclick="deleteFood(${index})">Ø­Ø°Ù</button>
                    </td>
                `;
                foodDatabase.appendChild(row);
            });
        }

        function editFoodForm(index) {
            currentEditIndex = index;
            const food = foodDB[index];
            document.getElementById('editFoodIndex').value = index;
            document.getElementById('editFoodName').value = food.name;
            document.getElementById('editSodium').value = food.sodium;
            document.getElementById('editPotassium').value = food.potassium;
            document.getElementById('editPhosphorus').value = food.phosphorus;
            document.getElementById('editWater').value = food.water;
            document.getElementById('editFoodForm').classList.add('active');
        }

        function cancelEdit() {
            document.getElementById('editFoodForm').classList.remove('active');
            currentEditIndex = null;
        }

        function editFood(event) {
            event.preventDefault();
            const index = parseInt(document.getElementById('editFoodIndex').value);
            foodDB[index] = {
                name: document.getElementById('editFoodName').value,
                sodium: parseInt(document.getElementById('editSodium').value),
                potassium: parseInt(document.getElementById('editPotassium').value),
                phosphorus: parseInt(document.getElementById('editPhosphorus').value),
                water: parseInt(document.getElementById('editWater').value)
            };
            userData = getData() || {};
            userData.foodDB = foodDB;
            saveData(userData);
            updateEducationDB();
            updateFoodSelect();
            cancelEdit();
        }

        function deleteFood(index) {
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† Ù…Ø§Ø¯Ù‡ ØºØ°Ø§ÛŒÛŒ Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ')) {
                foodDB.splice(index, 1);
                userData = getData() || {};
                userData.foodDB = foodDB;
                saveData(userData);
                updateEducationDB();
                updateFoodSelect();
            }
        }

        function saveSettings(event) {            event.preventDefault();
            settings.sodiumLimit = parseInt(document.getElementById('sodiumLimit').value);
            settings.potassiumLimit = parseInt(document.getElementById('potassiumLimit').value);
            settings.phosphorusLimit = parseInt(document.getElementById('phosphorusLimit').value);            settings.waterLimit = parseInt(document.getElementById('waterLimit').value);
            userData = getData() || {};
            userData.settings = settings;
            saveData(userData);
            updateChart();
            checkLimits();
        }

        function resetData() {
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ú©Ù†ÛŒØ¯ØŸ')) {
                localStorage.removeItem(`userData_${userId}`);
                dailyIntake = [];
                foodDB = [ // Reset foodDB to its initial state
                    {name: 'Ù…Ø±Øº', sodium: 70, potassium: 280, phosphorus: 200, water: 65},
                    {name: 'Ø¨Ø±Ù†Ø¬', sodium: 5, potassium: 35, phosphorus: 40, water: 70},
                    {name: 'Ø³ÛŒØ¨ Ø²Ù…ÛŒÙ†ÛŒ', sodium: 10, potassium: 400, phosphorus: 50, water: 80},
                    {name: 'Ø´ÛŒØ±', sodium: 50, potassium: 350, phosphorus: 250, water: 90},
                    {name: 'Ù†Ø§Ù†', sodium: 200, potassium: 80, phosphorus: 70, water: 40},
                    {name: 'ØªØ®Ù… Ù…Ø±Øº', sodium: 60, potassium: 70, phosphorus: 90, water: 75},
                    {name: 'Ù…Ø§Ø³Øª', sodium: 80, potassium: 150, phosphorus: 120, water: 85},
                    {name: 'Ø®ÛŒØ§Ø±', sodium: 5, potassium: 150, phosphorus: 20, water: 95},
                    {name: 'Ú¯ÙˆØ¬Ù‡ ÙØ±Ù†Ú¯ÛŒ', sodium: 10, potassium: 250, phosphorus: 30, water: 90},
                    {name: 'Ù‡ÙˆÛŒØ¬', sodium: 15, potassium: 300, phosphorus: 35, water: 88}
                ];
                settings = {  // and settings
                    sodiumLimit: 2000,
                    potassiumLimit: 2000,
                    phosphorusLimit: 1000,
                    waterLimit: 1500
                };
                themeSettings = { fontSize: '1' }; // and theme settings
                updateChart();
                updateCurrentTotalsDisplay();
                updateHistoryTable();
                checkLimits();
                updateFoodSelect(); // Add this to repopulate the food select
                updateEducationDB();

            }
        }

        function clearHistory() {
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯ØŸ')) {
                dailyIntake = [];
                userData = getData() || {};
                userData.dailyIntake = dailyIntake;
                saveData(userData);
                updateHistoryTable();
                updateChart();
                updateCurrentTotalsDisplay();
                checkLimits();
            }
        }

        function updateHistoryTable() {
            const historyTable = document.getElementById('historyTable');
            historyTable.innerHTML = '';
            dailyIntake.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.foodName}</td>
                    <td>${item.amount}</td>
                    <td>${item.mealType}</td>
                    <td>${item.dayOfWeek}</td>
                `;
                historyTable.appendChild(row);
            });
        }

        function applyTheme() {
            themeSettings.fontSize = document.getElementById('fontSize').value;
            userData = getData() || {};
            userData.themeSettings = themeSettings;            saveData(userData);
            document.documentElement.style.fontSize = `${themeSettings.fontSize}rem`;
        }

        function checkLimits() {
            let currentTotals = calculateCurrentTotals();
            let warningsDiv = document.getElementById('warnings');
            warningsDiv.innerHTML = '';            if (currentTotals.sodium > settings.sodiumLimit) {
                warningsDiv.innerHTML += `<div class="warning">Ø®Ø·Ø±: Ù…ÛŒØ²Ø§Ù† Ø³Ø¯ÛŒÙ… Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² (${settings.sodiumLimit} Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…) Ø¨ÛŒØ´ØªØ± Ø§Ø³Øª!</div>`;
            }
            if (currentTotals.potassium > settings.potassiumLimit) {
                warningsDiv.innerHTML += `<div class="warning">Ø®Ø·Ø±: Ù…ÛŒØ²Ø§Ù† Ù¾ØªØ§Ø³ÛŒÙ… Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² (${settings.potassiumLimit} Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…) Ø¨ÛŒØ´ØªØ± Ø§Ø³Øª!</div>`;
            }
            if (currentTotals.phosphorus > settings.phosphorusLimit) {
                warningsDiv.innerHTML += `<div class="warning">Ø®Ø·Ø±: Ù…ÛŒØ²Ø§Ù† ÙØ³ÙØ± Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² (${settings.phosphorusLimit} Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…) Ø¨ÛŒØ´ØªØ± Ø§Ø³Øª!</div>`;
            }
            if (currentTotals.water > settings.waterLimit) {
                warningsDiv.innerHTML += `<div class="warning">Ø®Ø·Ø±: Ù…ÛŒØ²Ø§Ù† Ø¢Ø¨ Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² (${settings.waterLimit} Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±) Ø¨ÛŒØ´ØªØ± Ø§Ø³Øª!</div>`;
            }
        }

        function updateFaceStickers() {
            let currentTotals = calculateCurrentTotals();

            const sodiumPercentage = Math.min((currentTotals.sodium / settings.sodiumLimit) * 100, 100);
            const potassiumPercentage = Math.min((currentTotals.potassium / settings.potassiumLimit) * 100, 100);
            const phosphorusPercentage = Math.min((currentTotals.phosphorus / settings.phosphorusLimit) * 100, 100);
            const waterPercentage = Math.min((currentTotals.water / settings.waterLimit) * 100, 100);

            document.getElementById('sodiumFaceSticker').textContent = getFaceSticker(sodiumPercentage);
            document.getElementById('potassiumFaceSticker').textContent = getFaceSticker(potassiumPercentage);
            document.getElementById('phosphorusFaceSticker').textContent = getFaceSticker(phosphorusPercentage);
            document.getElementById('waterFaceSticker').textContent = getFaceSticker(waterPercentage);
        }

        function getFaceSticker(percentage) {
            if (percentage < 50) {
                return 'ğŸ˜Š'; // Safe
            } else if (percentage < 80) {
                return 'ğŸ˜'; // Moderate
            } else {
                return 'ğŸ˜Ÿ'; // Warning
            }
        }

        // Initial setup
        document.documentElement.style.fontSize = `${themeSettings.fontSize}rem`;
        updateFoodSelect();
        updateEducationDB();
        updateHistoryTable();
        updateChart();
        updateCurrentTotalsDisplay();
        checkLimits();
        updateFaceStickers();


        // PWA - Service Worker Registration
         if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
           navigator.serviceWorker.register('./service-worker.js') // Ù…Ø³ÛŒØ± Ù†Ø³Ø¨ÛŒ
            .then((registration) => {
              console.log('ServiceWorker registered:', registration);
           })
           .catch((error) => {
            console.error('ServiceWorker registration failed:', error);
           });
       });
   }

    </script></body>
</html>